"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};module.exports=function(){function e(e,t){var r={current:"",temp:""},o={current:null,temp:null},u=function(){var r=e(n()).trim(),o=[];"object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.keys(t).forEach(function(e){return-1===l.indexOf(e)?console.error(e+" is not a valid event"):"string"!=typeof t[e]?console.error(e+" is not a valid string"):void o.push("on"+e+"=\"(function(){temps.emit('"+t[e]+"')})()\" ")});var u=o.join("").trim();if(u.length){var c=r.match(/^<\w+(-\w+)?(\s|>)/);if(!c||!c.length)return console.error("no match for "+r),r;var a=c[0],i=a.slice(0,-1),s=a.slice(-1);return r.replace(a,i+" "+u+" "+s)}return r};return{render:function(){if(r.temp=u(),o.current&&r.temp===r.current)return o.current;var e=document.createElement("div");e.innerHTML=r.temp,o.temp=e.firstChild;var t=r.temp;return o.temp.toString=function(){return t},o.current||(o.current=o.temp),o.current&&o.current.parentNode&&o.current.parentNode.replaceChild(o.temp,o.current),r.current=r.temp,o.current=o.temp,r.temp=o.temp=null,o.current},toString:function(){return u()},attachStateEvent:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];r.forEach(function(t){"undefined"==typeof s[t]&&(s[t]=[]),s[t].push(e)})}}}var t=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(Array.isArray&&Array.isArray(e)||e.constructor===Array||e instanceof Array)},r=[],n=function(){return r[r.length-1]},o=function m(e){r.length>1&&r.pop(),"number"==typeof e&&e>1?m(e-1):p("STATE_REVERTED")},u=function(){r.splice(1),p("STATE_RESET")},c=function(e){return r[0]=e},a=function(e){return r.push(e)},i={},s={},f=function(e,r){t(i[e])||(i[e]=[]),i[e].push(r)},p=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;t>o;o++)r[o-1]=arguments[o];i[e]&&("STATE_RESET"===e||"STATE_REVERTED"===e?i[e].forEach(function(e){return e.apply(void 0,[n()].concat(r))}):!function(){var t=Object.assign({},n());i[e].forEach(function(e){return e.apply(void 0,[t].concat(r))}),a(t)}()),s[e]&&s[e].forEach(function(e){e.render()})},l=["abort","autocomplete","autocompleteerror","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","show","stalled","submit","suspend","timeupdate","toggle","volumechange","waiting"];return e.getState=function(){return n()},e.resetState=function(){return u()},e.setInitialState=function(e){return c(e)},e.stateHistory=function(){return r.map(function(e){return e})},e.revertState=function(e){return o(e)},e.on=function(e,t){return f(e,t)},e.emit=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return p.apply(void 0,[e].concat(r))},e}();