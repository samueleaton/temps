"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},temps=function(){function t(t,n){var r={current:"",temp:""},u={current:null,temp:null},o=function(){return t(e()).trim()};return{render:function(){if(r.temp=o(),u.current&&r.temp===r.current)return u.current;var t=document.createElement("div");t.innerHTML=r.temp,u.temp=t.firstChild;var e=r.temp;return u.temp.toString=function(){return e},u.current||(u.current=u.temp),u.current&&u.current.parentNode&&u.current.parentNode.replaceChild(u.temp,u.current),r.current=r.temp,u.current=u.temp,r.temp=u.temp=null,"function"==typeof n&&n(u.current),u.current},toString:function(){return o()},attachStateEvent:function(){for(var t=this,n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];r.forEach(function(n){"undefined"==typeof f[n]&&(f[n]=[]),f[n].push(t)})}}}var n=function(t){return"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(Array.isArray&&Array.isArray(t)||t.constructor===Array||t instanceof Array)},r=[],e=function(){return r[r.length-1]},u=function l(t){r.length>1&&r.pop(),"number"==typeof t&&t>1?l(t-1):m("STATE_REVERTED")},o=function(){r.splice(1),m("STATE_RESET")},c=function(t){return r[0]=t},i=function(t){return r.push(t)},a={},f={},p=function(t,r){n(a[t])||(a[t]=[]),a[t].push(r)},m=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),u=1;n>u;u++)r[u-1]=arguments[u];a[t]&&("STATE_RESET"===t||"STATE_REVERTED"===t?a[t].forEach(function(t){return t.apply(void 0,[e()].concat(r))}):!function(){var n=Object.assign({},e());a[t].forEach(function(t){return t.apply(void 0,[n].concat(r))}),i(n)}()),console.log("evt: ",t),console.log("attachedTemplates: ",f),console.log("attachedTemplates[evt]: ",f[t]),f[t]&&f[t].forEach(function(t){return t.render()})};return{getState:function(){return e()},resetState:function(){return o()},setInitialState:function(t){return c(t)},stateHistory:function(){return r.map(function(t){return t})},revertState:function(t){return u(t)},template:function(n,r){return t(n,r)},on:function(t,n){return p(t,n)},emit:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;n>e;e++)r[e-1]=arguments[e];return m.apply(void 0,[t].concat(r))}}}();